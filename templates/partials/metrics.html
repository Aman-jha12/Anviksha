<!-- OVERVIEW METRICS -->
<section class="metrics-section">
    <h2 class="section-title">Overview</h2>
    <p class="metrics-subtitle">Based on current filter selection</p>
    
    <div class="metrics-grid">
        <!-- Primary Metric -->
        <div class="metric-card metric-card--primary">
            <div class="metric-header">
                <span class="metric-icon">â‚¹</span>
                <h3 class="metric-title">Total Spending (Adjusted)</h3>
            </div>
            <div class="metric-value">
                {% if stats.get('total_spending') %}
                    â‚¹{{ (stats['total_spending'] / 10000000) | round(2) }} Cr
                {% else %}
                    â‚¹0.00 Cr
                {% endif %}
            </div>
            <p class="metric-subtext">Inflation-adjusted expenditure for selected filters</p>
        </div>

        <!-- Secondary Metrics -->
        <div class="metric-card">
            <div class="metric-header">
                <span class="metric-icon">ğŸ›£ï¸</span>
                <h3 class="metric-title">Total Projects</h3>
            </div>
            <div class="metric-value">{{ stats.get('total_projects', 0) | int }}</div>
            <p class="metric-subtext">Number of road infrastructure projects</p>
        </div>

        <div class="metric-card">
            <div class="metric-header">
                <span class="metric-icon">ğŸ“…</span>
                <h3 class="metric-title">Time Range</h3>
            </div>
            <div class="metric-value">{{ stats.get('year_range', 'N/A') }}</div>
            <p class="metric-subtext">Years covered by this dataset</p>
        </div>

        <div class="metric-card">
            <div class="metric-header">
                <span class="metric-icon">ğŸ“</span>
                <h3 class="metric-title">Avg Cost per Km</h3>
            </div>
            <div class="metric-value">
                {% if stats.get('avg_cost_per_km') %}
                    â‚¹{{ (stats['avg_cost_per_km'] / 10000000) | round(2) }} Cr
                {% else %}
                    â‚¹0.00 Cr
                {% endif %}
            </div>
            <p class="metric-subtext">Average adjusted spending per kilometer</p>
        </div>
    </div>
</section>

<!-- STATISTICAL OBSERVATIONS -->
<section class="observations-section">
    <h2 class="section-title">Statistical Observations</h2>
    <p class="observations-subtitle">Based on current filter selection</p>
    
    <div class="observations-grid">
        {% if observations and observations|length > 0 %}
            {% for observation in observations %}
            <div class="observation-card">
                <span class="observation-label">{{ observation.get('type', 'observation').replace('_', ' ').title() }}</span>
                <p class="observation-text">{{ observation.get('text', observation.get('description', 'No description available')) }}</p>
                <p class="observation-metric">{{ observation.get('metric', '') }}</p>
            </div>
            {% endfor %}
        {% else %}
            <div class="observation-card">
                <span class="observation-label">No Patterns Detected</span>
                <p class="observation-text">All metrics are within normal statistical ranges for the current selection.</p>
            </div>
        {% endif %}
    </div>
</section>

<!-- EXPORT SECTION -->
<section class="export-section">
    <h2 class="section-title">Export Data</h2>
    <p class="export-helper">Download data for further independent analysis.</p>
    
    <div class="export-buttons">
        <a href="/export/summary" class="btn btn--primary">ğŸ“¥ Download as CSV</a>
        <a href="/export/detailed" class="btn btn--secondary">ğŸ“¥ Download as JSON</a>
    </div>
</section>
